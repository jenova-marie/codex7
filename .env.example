# üîê Codex7 Environment Variables
# Copy this file to .env and fill in your actual values
#
# ‚ö†Ô∏è  NEVER commit .env to version control!
# ‚ö†Ô∏è  These are example values - use strong passwords and keys in production!

# ============================================
# üåç Environment
# ============================================
NODE_ENV=development  # development | production | test
LOG_LEVEL=debug       # trace | debug | info | warn | error | fatal
LOG_FORMAT=pretty     # pretty | json

# ============================================
# üóÑÔ∏è PostgreSQL Database
# ============================================
DATABASE_URL=postgresql://codex7:codex7_dev_password_change_me@localhost:5432/codex7

# Or use individual components
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=codex7
POSTGRES_PASSWORD=codex7_dev_password_change_me
POSTGRES_DB=codex7

# Database pool configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# ============================================
# üî¥ Redis (Job Queue & Caching)
# ============================================
REDIS_URL=redis://:codex7_redis_password_change_me@localhost:6379

# Or use individual components
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=codex7_redis_password_change_me
REDIS_MAX_RETRIES=3

# ============================================
# ü§ñ OpenAI API (for embeddings)
# ============================================
OPENAI_API_KEY=sk-...your-openai-api-key...
OPENAI_ORGANIZATION=org-...optional...
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ============================================
# üêô GitHub (for documentation scraping)
# ============================================
GITHUB_TOKEN=ghp_...your-github-personal-access-token...
GITHUB_RATE_LIMIT=5000

# ============================================
# ü§ñ Anthropic (optional - for LLM reranking)
# ============================================
ANTHROPIC_API_KEY=sk-ant-...optional...

# ============================================
# üîí Security
# ============================================
# JWT secret (generate with: openssl rand -hex 32)
JWT_SECRET=your-super-secret-jwt-key-change-me-in-production
JWT_EXPIRES_IN=7d

# API key salt (generate with: openssl rand -hex 32)
API_KEY_SALT=your-api-key-salt-change-me

# Encryption key for embeddings at rest (generate with: openssl rand -hex 32)
ENCRYPTION_KEY=your-encryption-key-change-me-32-chars-minimum

# CORS configuration
CORS_ORIGIN=http://localhost:5173
CORS_CREDENTIALS=true

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# üåê Service Ports
# ============================================
API_PORT=4000
API_HOST=0.0.0.0

WEB_PORT=5173
VITE_API_URL=http://localhost:4000

MCP_PORT=3000
MCP_HOST=0.0.0.0

# ============================================
# üîç Indexer Configuration
# ============================================
INDEXER_CONCURRENCY=5
DEFAULT_CHUNK_SIZE=2000
DEFAULT_CHUNK_OVERLAP=200
MAX_FILE_SIZE=10485760  # 10MB

# Re-indexing schedule (cron format)
REINDEX_SCHEDULE=0 2 * * *  # 2 AM daily

# ============================================
# üéØ Search Configuration
# ============================================
MAX_SEARCH_RESULTS=100
DEFAULT_SEARCH_LIMIT=10
DEFAULT_TOKEN_LIMIT=5000
MAX_TOKEN_LIMIT=10000

# Vector search settings
VECTOR_SEARCH_SIMILARITY=cosine
VECTOR_SEARCH_MIN_SCORE=0.7

# ============================================
# üîí SSL/TLS (Production)
# ============================================
DOMAIN=codex7.yourdomain.com
SSL_EMAIL=your-email@example.com
SSL_CERT_PATH=/etc/letsencrypt/live/${DOMAIN}/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/${DOMAIN}/privkey.pem

# ============================================
# üìä Monitoring & Observability
# ============================================
# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Sentry error tracking
SENTRY_DSN=https://...your-sentry-dsn...
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# OpenTelemetry (optional)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# ============================================
# üß™ Testing
# ============================================
TEST_DATABASE_URL=postgresql://codex7:codex7_test@localhost:5432/codex7_test
TEST_OPENAI_API_KEY=${OPENAI_API_KEY}

# ============================================
# üéõÔ∏è Feature Flags
# ============================================
ENABLE_LLM_RERANKING=false
ENABLE_SEMANTIC_CHUNKING=false
ENABLE_WEB_SCRAPING=true
ENABLE_PDF_PARSING=false

# ============================================
# üê≥ Docker Compose
# ============================================
COMPOSE_PROJECT_NAME=codex7
