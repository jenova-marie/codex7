# ðŸ“¡ Codex7 MCP Server - Wonder Logger Configuration

service:
  name: ${SERVICE_NAME:-codex7-mcp-server}
  version: ${SERVICE_VERSION:-0.1.0-alpha}
  environment: ${NODE_ENV:-development}

logger:
  enabled: true
  level: info

  # Redact sensitive fields from logs
  redact:
    - password
    - token
    - apiKey
    - 'user.email'
    - 'req.headers.authorization'
    - 'openai.apiKey'

  # Log transports
  transports:
    # Console output (pretty in dev, JSON in prod)
    - type: console
      pretty: false
      level: info

    # OpenTelemetry (send to Loki)
    - type: otel
      endpoint: http://localhost:4318/v1/logs
      level: info

    # Memory transport (for runtime inspection and testing)
    - type: memory
      name: codex7-mcp-server
      maxSize: 10000
      level: debug

  # Enable trace context injection (disabled for Phase 0)
  plugins:
    traceContext: false

otel:
  enabled: false

  # Distributed tracing
  tracing:
    enabled: false
    exporter: otlp
    endpoint: http://localhost:4318/v1/traces
    sampleRate: 1.0

  # Metrics collection
  metrics:
    enabled: false
    exportIntervalMillis: 60000

    exporters:
      # Prometheus scrape endpoint
      - type: prometheus
        port: 9464

      # OTLP push to Prometheus
      - type: otlp
        endpoint: http://localhost:4318/v1/metrics

  # Automatic instrumentation
  instrumentation:
    auto: true
    http: true
